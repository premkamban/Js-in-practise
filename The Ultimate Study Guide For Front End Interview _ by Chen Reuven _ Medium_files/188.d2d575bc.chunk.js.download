(self.webpackChunklite=self.webpackChunklite||[]).push([[188],{85282:(e,n,t)=>{"use strict";t.d(n,{Z:()=>l});var i=t(67294);function a(){return(a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}var o=i.createElement("path",{d:"M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zM6.77 10.46a.62.62 0 1 1-1.23 0V5.54a.62.62 0 0 1 1.23 0v4.92zm3.7 0a.62.62 0 1 1-1.24 0V5.54a.62.62 0 0 1 1.23 0v4.92z",fill:"#292929"});const l=function(e){return i.createElement("svg",a({width:16,height:16,viewBox:"0 0 16 16",fill:"none"},e),o)}},78319:(e,n,t)=>{"use strict";t.d(n,{Z:()=>l});var i=t(67294);function a(){return(a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}var o=i.createElement("path",{d:"M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm2.8 8.51l-3.69 2.46a.62.62 0 0 1-.96-.5V5.53a.62.62 0 0 1 .96-.51l3.7 2.46a.62.62 0 0 1 0 1.02z",fill:"#292929"});const l=function(e){return i.createElement("svg",a({width:16,height:16,viewBox:"0 0 16 16",fill:"none"},e),o)}},41190:(e,n,t)=>{"use strict";t.d(n,{C:()=>v,F:()=>k});var i=t(319),a=t.n(i),o=t(22412),l=t(62549),r=t(82864),s={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBylineHeaderInfos_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"firstPublishedAt"}},{kind:"Field",name:{kind:"Name",value:"readingTime"}},{kind:"FragmentSpread",name:{kind:"Name",value:"DraftStatus_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"Star_post"}}]}}].concat(a()(l.t.definitions),a()(r.W.definitions))},d=t(93403),c=t(15855),m={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBylineHeaderActionsButtons_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"BookmarkButton_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SharePostButtons_post"}}]}}].concat(a()(d.z.definitions),a()(c.E.definitions))},u=t(56785),p=t(51277),k={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBylineHeader_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CreatorHeader_user"}}]}}].concat(a()(o.p.definitions))},v={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBylineHeader_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostBylineHeaderInfos_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostBylineHeaderActionsButtons_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"InResponseToEntityPreview_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"OverflowMenuButtonWithNegativeSignal_post"}}]}}].concat(a()(s.definitions),a()(m.definitions),a()(u.V.definitions),a()(p.v.definitions))}},45807:(e,n,t)=>{"use strict";t.d(n,{O:()=>J});var i=t(67294),a=t(46510),o=t(91743),l=t(36781),r=t(1444),s=t(75399),d=t(77355),c=t(66411),m=function(e){var n=e.post,t=e.source;return i.createElement(i.Fragment,null,i.createElement(s.U,{post:n,source:t,useSubtleShareButtons:!0,spacing:"4px"}),i.createElement(d.x,{margin:"0 4px 0 28px",display:"flex",alignItems:"center"},i.createElement(c.cW,{source:{name:t}},i.createElement(r.o,{post:n,susiEntry:"bookmark_header",buttonStyle:"ICON_SUBTLE"}))))},u=function(e){var n=e.post,t=e.source;return i.createElement(d.x,{paddingTop:"24px",display:{xs:"flex",sm:"flex",md:"none",lg:"none",xl:"none"}},i.createElement(d.x,{marginRight:"16px"},i.createElement(c.cW,{source:{name:t}},i.createElement(r.o,{post:n,susiEntry:"bookmark_header",buttonStyle:"ICON_TEXT"}))),i.createElement(s.U,{post:n,source:t,useSubtleShareButtons:!0,spacing:"12px"}))},p=t(35989),k=t(63459),v=t(18704),f=t(34796),V=t(64718),g=t(63038),S=t.n(g),h=t(68356),E=t.n(h),N=t(10374),y=t(25735),b=t(6443),F=t(96370),x=t(47230),w=t(87691),T=t(18627),_=t(14646),P=t(50742),A=t(85282),C=t(17417),I=t(77280),R=t(78319),D=t(68894),B=function(e){return{padding:"0",cursor:"pointer",border:"none",display:"flex",alignItems:"center",":hover > p":{color:e.accentColor.text.dark},":hover > svg > path":{fill:e.accentColor.fill.dark}}},M=function(e){return{marginRight:"3px",marginBottom:"-1px",padding:"1px","> path":{fill:e.accentColor.fill.normal}}},L=function(e){var n=e.onClick,t=(0,_.I)();return i.createElement(x.z,{onClick:n,className:t(B)},i.createElement(R.Z,{className:t(M)}),i.createElement(w.F,{scale:"M",color:"ACCENT"},"Listen"))},O=function(e){var n=e.onClick,t=(0,I.PM)(),a=(0,c.P7)(t||"").susiEntry,o=(0,D.O)("post_audio_button"===a),l=S()(o,3),r=l[0],s=l[2];return i.createElement(C.A,{isVisible:r,message:"You can now listen to stories",dismissText:"Got it",dismiss:s,targetDistance:10},i.createElement(L,{onClick:n}))},U=t(26350),H=t(43822),z=t(92661),W=t(78870),Q=function(e){var n=e.postId,t=(0,b.H)().value,a="post_audio_button",o=(0,W.Rk)((0,z.qt)("ShowPay",{}),{susiEntry:a,postId:n});return t?i.createElement(H.a,{redirectUrl:o},i.createElement(L,null)):i.createElement(U.R,{operation:"register",susiEntry:a,actionUrl:o},i.createElement(L,null))},j=E()({loader:function(){return t.e(6391).then(t.bind(t,82249))},modules:["src/components/post/text-to-speech/SpeechifyWidget"],webpack:function(){return[82249]},loading:function(e){var n=e.children;return i.createElement(i.Fragment,null,n)},render:(0,P.n)("SpeechifyWidget")}),G=i.forwardRef((function(e,n){var t=e.postId,a=e.postBodyRef,o=e.isLockedPreviewOnly,l=(0,_.I)(),r=(0,T.Av)(),s=(0,b.H)().value,c=(0,y.VB)({name:"enable_members_only_audio",placeholder:!1}),m=!(null==s||!s.mediumMemberAt),u=(0,N.Ij)().paragraphRefsMappers.paragraphTitlesRefsByStyleMap,p=(0,i.useState)(!0),k=S()(p,2),v=k[0],f=k[1];i.useEffect((function(){return r.event("experiment.eligible",{experimentId:"ec7b685b3f40"}),f(!0)}),[u]);var V=!m&&(o||c);return i.createElement(d.x,{display:"inline-flex",alignItems:"center",boxSizing:"border-box"},i.createElement(d.x,{flexGrow:"1"},i.createElement(F.P,{size:"full"},i.createElement("div",{ref:n},V?c?i.createElement(Q,{postId:t}):null:v?i.createElement(O,{onClick:function(){if(v){var e=new Audio;e.autoplay=!0,e.src="data:audio/mpeg;base64,SUQzBAAAAAABEVRYWFgAAAAtAAADY29tbWVudABCaWdTb3VuZEJhbmsuY29tIC8gTGFTb25vdGhlcXVlLm9yZwBURU5DAAAAHQAAA1N3aXRjaCBQbHVzIMKpIE5DSCBTb2Z0d2FyZQBUSVQyAAAABgAAAzIyMzUAVFNTRQAAAA8AAANMYXZmNTcuODMuMTAwAAAAAAAAAAAAAAD/80DEAAAAA0gAAAAATEFNRTMuMTAwVVVVVVVVVVVVVUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQsRbAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQMSkAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",f(!1)}}}):i.createElement(j,{postId:t,buttonStyle:B,audioIconStyle:M,postBodyRef:a},i.createElement(x.z,{className:l(B)},i.createElement(A.Z,{className:l(M)}),i.createElement(w.F,{scale:"M",color:"ACCENT"},"0:00")))))))})),K=t(73279),Y={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"MaybeTextToSpeechQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"detectedLanguage"}},{kind:"Field",name:{kind:"Name",value:"wordCount"}}]}}]}}]},X=function(){return i.createElement(d.x,{display:"inline-block",padding:"0 8px",ariaHidden:"true"},i.createElement(K.O,null))},Z=function(e){var n,t,a,o,l=e.postId,r=e.postBodyRef,s=e.isLockedPreviewOnly,d=e.isPublished,c=(0,V.a)(Y,{variables:{postId:l}}),m=c.data,u=c.error,p=c.loading;if(!l||p||u)return null;var k=null!==(n=null==m||null===(t=m.post)||void 0===t?void 0:t.wordCount)&&void 0!==n?n:0,v=null!==(a=null==m||null===(o=m.post)||void 0===o?void 0:o.detectedLanguage)&&void 0!==a?a:"";return!d||d&&"en"===v&&k>20?i.createElement(i.Fragment,null,i.createElement(X,null),i.createElement(G,{postId:l,postBodyRef:r,isLockedPreviewOnly:s})):null},$=function(){return i.createElement(d.x,{display:"inline-block",padding:"0 8px",ariaHidden:"true"},i.createElement(K.O,null))},q=function(e){var n=e.showStar,t=e.post,a=e.postBodyRef,o=e.isLockedPreviewOnly,l=t.firstPublishedAt,r=t.readingTime,s=(0,y.VB)({name:"enable_speechify_widget",placeholder:!1});return i.createElement(i.Fragment,null,Boolean(l)&&i.createElement(i.Fragment,null,i.createElement(w.F,{scale:"M",playwrightClassName:"pw-published-date"},i.createElement(k.E,{timestamp:l})),i.createElement($,null)),i.createElement(v.N,{scale:"M",tag:"div",readingTime:r}),n&&i.createElement(i.Fragment,null,i.createElement($,null),i.createElement(p.U,{post:t})),!l&&i.createElement(i.Fragment,null,i.createElement($,null),i.createElement(w.F,{color:"DARKER",scale:"M"},i.createElement(f.FV,{post:t}))),s&&i.createElement(i.Fragment,null,i.createElement(Z,{postId:t.id,postBodyRef:a,isLockedPreviewOnly:o,isPublished:!!l})))},J=function(e){var n=e.post,t=e.creator,r=e.postBodyRef,s=e.isLockedPreviewOnly,d=void 0!==s&&s,c=e.showInResponseToEntityPreview,p=void 0!==c&&c,k=e.showStar,v=void 0!==k&&k,f=e.viewerId,V=e.playwrightClassName;if(!t)return null;var g="post_actions_header";return i.createElement(a.c,{creator:t,viewerId:f,playwrightClassName:V,entityInfos:i.createElement(q,{post:n,showStar:v,postBodyRef:r,isLockedPreviewOnly:d}),desktopActionsButtons:i.createElement(m,{post:n,source:g}),mobileActionsButtons:i.createElement(u,{post:n,source:g}),menuActionsButton:i.createElement(o.t,{post:n,iconStyle:"ICON_SUBTLE"}),responseToEntityPreview:p&&i.createElement(l.h,{padding:"24px 0 0",post:n,postPreviewMarginBottom:40})})}},22836:(e,n,t)=>{"use strict";t.d(n,{l:()=>k});var i=t(67294),a=t(68427),o=t(71652),l=t(25735),r=t(96370),s=t(77355),d=t(93310),c=t(21755),m=t(87691),u=t(17583),p=function(e){var n=e.children,t=(0,u.s)();return(0,l.VB)({name:"enable_two_column_layout_with_global_nav",placeholder:!1})&&t===c.j.xl?i.createElement(r.P,{size:"app"},i.createElement(s.x,{borderBottom:"BASE_LIGHTER"},n)):i.createElement(s.x,{borderBottom:"BASE_LIGHTER"},i.createElement(r.P,{size:"app"},n))},k=function(e){var n=e.collection,t=n.name,l=(0,a.R)(n);return i.createElement(p,null,i.createElement(s.x,{display:"flex",alignItems:"center",height:"56px"},i.createElement(s.x,{marginRight:"16px"},i.createElement(d.r,{href:l},i.createElement(o.v,{collection:n,size:32,circular:!0}))),i.createElement(s.x,{marginRight:"3px",flexShrink:"0"},i.createElement(m.F,{scale:"M",color:"LIGHTER",tag:"div"},"Published in")),i.createElement(d.r,{href:l},i.createElement(m.F,{scale:"M",color:"DARKER",clamp:1},t))))}},22412:(e,n,t)=>{"use strict";t.d(n,{p:()=>c});var i=t(319),a=t.n(i),o=t(68216),l=t(54341),r=t(93961),s={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"AuthorNameTooltip_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserMentionTooltip_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"userUrl_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PublisherFollowLink_publisher"}}]}}].concat(a()(l.O.definitions),a()(o.$m.definitions),a()(r.u.definitions))},d=t(27048),c={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CreatorHeader_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"userUrl_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AuthorNameTooltip_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserAvatar_user"}}]}}].concat(a()(o.$m.definitions),a()(s.definitions),a()(d.W.definitions))}},46510:(e,n,t)=>{"use strict";t.d(n,{c:()=>v});var i=t(67294),a=t(84739),o=t(55155),l=t(25735),r=t(28695),s=t(77355),d=t(26244),c=t(93310),m=t(87691),u=function(e){var n=e.creator,t=e.viewerId,u=(0,a.B)(n),p=!!(0,l.VB)({name:"enable_two_column_layout_with_global_nav",placeholder:!1});return i.createElement(m.F,{tag:"div",scale:"L",color:"DARKER",playwrightClassName:"pw-author"},i.createElement(s.x,{display:"flex",flexDirection:"row",marginBottom:"4px"},i.createElement(d.$,{targetDistance:15,mouseLeaveDelay:100,placement:"top",role:"tooltip",popoverRenderFn:function(){return i.createElement(r.K,{user:n})}},i.createElement(c.r,{href:u},n.name)),n.id!==t&&i.createElement(s.x,{display:{xs:"inline-block",sm:"inline-block",md:"inline-block",lg:p?"none":"inline-block",xl:"none"},paddingLeft:"12px"},i.createElement(o.D,{publisher:n,buttonSize:"COMPACT",susiEntry:"follow_byline"}))))},p=t(17193),k=t(30020),v=function(e){var n=e.creator,t=e.playwrightClassName,o=e.entityInfos,l=e.viewerId,r=e.desktopActionsButtons,d=e.mobileActionsButtons,m=e.menuActionsButton,v=e.responseToEntityPreview,f=e.headerRef,V=e.marginBottom,g=void 0===V?{xs:"24px",sm:"24px",md:"24px",lg:"24px",xl:"32px"}:V,S=e.hasMenuActionsTooltip,h=void 0===S||S,E=(0,a.B)(n);return i.createElement(s.x,{ref:f,marginTop:{xs:"32px",sm:"32px",md:"32px",lg:"32px",xl:"56px"},marginBottom:g,tag:"header",playwrightClassName:t},i.createElement(s.x,{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},i.createElement(s.x,{display:"flex"},i.createElement(s.x,{marginRight:"16px"},i.createElement(c.r,{href:E},i.createElement(p.Yt,{scale:"M",user:n}))),i.createElement(s.x,null,i.createElement(u,{creator:n,viewerId:l}),i.createElement(s.x,{display:"flex",alignItems:"center",flexWrap:"wrap"},o))),i.createElement(s.x,{display:"flex",alignItems:"center"},i.createElement(s.x,{display:{xs:"none",sm:"none",md:"inline-flex",lg:"inline-flex",xl:"inline-flex"}},r),i.createElement(s.x,{display:"inline-flex",marginLeft:"16px"},h?i.createElement(k._,{tooltipText:"More",targetDistance:10},m):m))),d,v)}},93961:(e,n,t)=>{"use strict";t.d(n,{u:()=>l});var i=t(319),a=t.n(i),o=t(81712),l={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PublisherFollowLink_publisher"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Publisher"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PublisherFollowButton_publisher"}}]}}].concat(a()(o.f.definitions))}},34492:(e,n,t)=>{"use strict";t.d(n,{I:()=>p});var i,a=t(59713),o=t.n(a),l=t(67294);!function(e){e.S="S",e.L="L"}(i||(i={}));var r=t(77355),s=t(9935),d=t(87691),c=t(14646),m=t(97489),u=t(14804),p=function(e){var n=e.children,t=e.scale,a=void 0===t?i.L:t,p=e.alpha,k=void 0===p?.05:p,v=e.verticalMargins,f=void 0===v?{normal:"24px",small:"24px"}:v,V=e.horizontalMargins,g=void 0===V?{normal:"-16px",small:"-12px 0"}:V,S=e.dismissable,h=e.onClick,E=e.maxWidth,N=void 0===E?"740px":E,y=(0,c.I)();return l.createElement("div",{className:y((function(e){return o()({background:(0,u.Uy)(k),borderRadius:"4px",margin:"".concat(f.small," ").concat(g.small),position:"relative"},m.xl(e),{margin:"".concat(f.normal," ").concat(g.normal)})}))},l.createElement(r.x,{display:"flex",justifyContent:"space-between",maxWidth:N,padding:"16px",sm:{padding:"12px"}},l.createElement(d.F,{scale:a,color:"DARKER"},n),S&&h&&l.createElement(s.P,{onClick:h,size:"REGULAR",isPositionAbsolute:!1,compensateInnerPadding:!0,"data-testid":"close-button"})))}},6177:(e,n,t)=>{"use strict";t.d(n,{F:()=>a,b:()=>o});var i=t(319),a={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"useShowAuthorNewsletterV3Promo_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"showPromo"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}}]}}]},o={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"useShowAuthorNewsletterV3Promo_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"useShowAuthorNewsletterV3Promo_user"}}]}}]}}].concat(t.n(i)()(a.definitions))}},1951:(e,n,t)=>{"use strict";t.d(n,{g:()=>l,t:()=>r});var i=t(67294),a=t(9354),o=t(75880),l=function(e){var n=e.creator,t=r(n);return n?t:{value:!1}},r=function(e){var n,t,l,r=(0,o.Pd)(e),s=r.viewerEdge,d=r.loading,c=i.useRef(null),m=(0,a.T)({newsletterSlug:null==e||null===(n=e.newsletterV3)||void 0===n?void 0:n.slug,username:null==e?void 0:e.username}),u=m.viewerEdge,p=m.loading;return(l=null!==c.current?{value:c.current}:d||p?{loading:!0}:null!=e&&null!==(t=e.newsletterV3)&&void 0!==t&&t.showPromo?{value:!(!(null!=s&&s.isUser||null==u)&&u.isSubscribed)}:{value:!1}).loading||void 0===l.value||null!==c.current||(c.current=l.value),l}},18704:(e,n,t)=>{"use strict";t.d(n,{N:()=>c});var i=t(28655),a=t.n(i),o=t(92471),l=t(67294),r=t(87691),s=t(21372);function d(){var e=a()(["\n  fragment PostListingReadingTime_post on Post {\n    readingTime\n  }\n"]);return d=function(){return e},e}function c(e){var n=e.readingTime,t=e.scale,i=void 0===t?"S":t,a=e.includeRead,o=void 0===a||a,d=e.color,c=e.tag,m=void 0===c?"span":c,u=o?" read":"";return l.createElement(r.F,{scale:i,color:d,tag:m,playwrightClassName:"pw-reading-time"},"".concat((0,s.Vd)(n||0)," min").concat(u))}(0,o.Ps)(d())},28096:(e,n,t)=>{"use strict";t.d(n,{X:()=>u,Z:()=>m});var i=t(319),a=t.n(i),o=t(31289),l={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"EntityDrivenSubscriptionCallToAction_creator"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useShouldShowEntityDrivenSubscription_creator"}}]}}].concat(a()(o.G.definitions))},r=t(78620),s={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"LIHighlightMeter_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UpsellClickable_post"}}]}}].concat(a()(r.H.definitions))},d=t(20121),c={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"MeterController_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"isLocked"}},{kind:"Field",name:{kind:"Name",value:"lockedSource"}},{kind:"FragmentSpread",name:{kind:"Name",value:"LIHighlightMeter_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"LOHighlightMeter_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SusiContainer_post"}}]}}].concat(a()(s.definitions),a()([{kind:"FragmentDefinition",name:{kind:"Name",value:"LOHighlightMeter_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]),a()(d.qt.definitions))},m={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostHeader_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NewsletterV3PostHeaderCTA_collection"}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"EntityDrivenSubscriptionCallToAction_creator"}}]}},{kind:"Field",name:{kind:"Name",value:"firstPublishedAt"}},{kind:"Field",name:{kind:"Name",value:"isLocked"}},{kind:"Field",name:{kind:"Name",value:"isNewsletter"}},{kind:"Field",name:{kind:"Name",value:"layerCake"}},{kind:"Field",name:{kind:"Name",value:"tags"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"topics"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"MeterController_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostNoteMissingNotification_post"}}]}}].concat(a()([{kind:"FragmentDefinition",name:{kind:"Name",value:"NewsletterV3PostHeaderCTA_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]),a()(l.definitions),a()(c.definitions),a()([{kind:"FragmentDefinition",name:{kind:"Name",value:"PostNoteMissingNotification_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]))},u={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostHeader_meteringInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MeteringInfo"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MeterController_meteringInfo"}}]}}].concat(a()([{kind:"FragmentDefinition",name:{kind:"Name",value:"MeterController_meteringInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MeteringInfo"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"postIds"}},{kind:"Field",name:{kind:"Name",value:"maxUnlockCount"}},{kind:"Field",name:{kind:"Name",value:"unlocksRemaining"}}]}}]))}},99272:(e,n,t)=>{"use strict";t.d(n,{m:()=>te});var i=t(67294),a=t(50008),o=t.n(a),l=t(63038),r=t.n(l),s=t(27517),d=t(28655),c=t.n(d),m=t(92471),u=t(23450),p=t.n(u),k=t(34492),v=t(77355),f=function(e){var n=e.link,t=e.text,a=e.verticalMargins;return i.createElement(k.I,{verticalMargins:a},t," ",i.createElement(v.x,{display:"inline",whiteSpace:"nowrap"},n))},V=t(36405),g=t(6443),S=t(28451),h=t(43822),E=t(18627),N=t(66411),y=t(90924),b=t(43487),F=t(50458);function x(){var e=c()(["\n  fragment LIHighlightMeter_post on Post {\n    id\n    ...UpsellClickable_post\n  }\n  ","\n"]);return x=function(){return e},e}var w=function(e){var n=e.meterCount,t=e.meterLimit,a=e.post,o=(0,g.H)().value,l=(0,E.Av)(),r=null==o?void 0:o.isMembershipTrialEligible,s=!(!(0,V.P5)("enable_trial_upsell")||!r);i.useEffect((function(){l.event("meter.viewed",{uiType:S.j.LIHighlightCTA,postId:a.id,meterCount:n,userId:null==o?void 0:o.id}),r&&l.event("experiment.eligible",{experimentId:"6797776ba4cf"})}),[]);var d,c=(0,b.v9)((function(e){return e.config.authDomain})),m=i.createElement(y.M,{tag:"span"},i.createElement(h.a,{linkStyle:"OBVIOUS",post:a,inline:!0,redirectUrl:(0,F.c5p)(c)},s?"Start your free trial":"Upgrade for unlimited access."));return i.createElement(N.cW,{source:{dimension:"post_counter",name:"upgrade_membership",postId:a.id}},i.createElement(f,{text:(d=t-n,d<=0?i.createElement(i.Fragment,null,"This is your ",i.createElement("b",null,"last")," free member-only story this month."):i.createElement(i.Fragment,null,"You have ",i.createElement("b",null,d)," free member-only ",p()("story",d)," left this month.")),link:m}))},T=((0,m.Ps)(x(),h.H),t(26350)),_=function(e){switch(e){case 0:return i.createElement(i.Fragment,null,"This is your ",i.createElement("b",null,"last")," free member-only story this month.");case 1:case 2:return i.createElement(i.Fragment,null,"You have ",i.createElement("b",null,e)," free member-only stor",1===e?"y":"ies"," left this month.");default:return i.createElement(i.Fragment,null,"You've read all your free member-only stories this month.")}},P=function(e){var n=e.post,t=e.meteringInfo,a=t.postIds?t.postIds.length:0,o=null===t.unlocksRemaining?0:t.unlocksRemaining,l=(0,b.v9)((function(e){return e.config.productName})),r=function(e){switch(e){case 0:return"metered_view_3";case 1:return"metered_view_2";case 2:default:return"smart_meter"}}(o),s=(0,E.Av)();i.useEffect((function(){s.event("meter.viewed",{uiType:S.j.LOHighlightCTA,postId:n.id,meterCount:a})}),[]);var d=i.createElement(T.R,{linkStyle:"OBVIOUS",inline:!0,operation:"register",susiEntry:r},"Sign up for ".concat(l," and get an extra one"));return i.createElement(N.cW,{source:{postId:n.id}},i.createElement(f,{text:_(o),link:d,verticalMargins:{normal:"24px",small:"16px"}}))},A=t(25735),C=t(14646),I=t(80872),R=t(54712),D=t(98067),B=t(87498),M=function(e){var n=e.meteringInfo,t=e.post,a=e.viewer,o=n.maxUnlockCount||3,l=n.postIds.length;return l<=o?(0,I.sy)()&&function(e){return e&&e.createdAt+B.pU>Date.now()}(a)?((0,I.Of)(),null):i.createElement(w,{meterCount:l,post:t,meterLimit:o}):null},L=function(e){var n=e.post,t=e.meteringInfo;if((0,A.VB)({name:"enable_dismissible_regwall",placeholder:!1}))return null;switch(t.unlocksRemaining){case 0:case 1:case 2:return i.createElement(P,{post:n,meteringInfo:t});default:return null}},O=function(e){var n=e.meteringInfo,t=e.post,a=(0,s.I0)(),l=(0,C.I)(),d=(0,R.xg)(),c=i.useState(!1),m=r()(c,2),u=m[0],p=m[1];i.useEffect((function(){void 0!==("undefined"==typeof document?"undefined":o()(document))&&p(!0),a((0,D.Dl)(!1))}),[]);var k=(0,g.H)(),v=k.loading,f=k.error,V=k.value;if(v||f)return i.createElement(i.Fragment,null);var S=V&&V.mediumMemberAt||void 0,h=t&&t.creator&&t.creator.id||void 0,E=V&&V.id||void 0,N=V?S||h===E:"LOCKED_POST_SOURCE_SYNDICATED"===t.lockedSource,y=!u||!t.isLocked||!n.postIds.includes(t.id)||N,b=u&&!y,F={height:b?"100%":"0px",overflow:b?"inherit":"hidden",transition:"height 2s cubic-bezier(0.23, 1, 0.32, 1) 0s"},x=V?i.createElement(M,{meteringInfo:n,post:t,viewer:V}):i.createElement(L,{post:t,meteringInfo:n});return i.createElement("div",{className:d?l(F):void 0},!y&&x)},U=t(93310);function H(){var e=c()(["\n  fragment NewsletterV3PostHeaderCTA_collection on Collection {\n    id\n    domain\n    slug\n    name\n    newsletterV3 {\n      id\n      slug\n      name\n    }\n  }\n"]);return H=function(){return e},e}(0,m.Ps)(H());var z=function(e){var n=e.collection,t=(0,b.v9)((function(e){return e.config.authDomain})),a=n.newsletterV3||{id:"",slug:"",name:""},o=(0,F.iBn)(a.slug,t,n),l=function(){return i.createElement(U.r,{inline:!0,linkStyle:"OBVIOUS",href:o},a.name)};return i.createElement(i.Fragment,null,i.createElement(k.I,null,n.newsletterV3?i.createElement(i.Fragment,null,"This is an email from ",i.createElement(l,null),", a newsletter by ",n.name,"."):i.createElement(i.Fragment,null,"This is an email from ",n.name,".")))},W=t(38460),Q=t(5977),j=t(9935),G=t(87691),K=t(68894),Y=function(e){var n=e.children,t=e.onHide,a=(0,K.O)(!0),o=r()(a,3),l=o[0],s=o[2],d=i.useCallback((function(){s(),null==t||t()}),[t]);return l?i.createElement(v.x,{border:"BASE_LIGHT",borderRadius:"4px",padding:"16px 8px 16px 28px",display:"flex",justifyContent:"space-between",alignItems:"center"},i.createElement(G.F,{scale:"L",color:"DARKER"},n),i.createElement(j.P,{onClick:d,isPositionAbsolute:!1,size:"REGULAR"})):null},X=t(77280),Z=t(39202);function $(){var e=c()(["\n  query PostNoteMissingNotificationQuery($postId: ID!, $postMeteringOptions: PostMeteringOptions) {\n    post(id: $postId) {\n      id\n      privateNotes {\n        id\n      }\n      content(postMeteringOptions: $postMeteringOptions) {\n        bodyModel {\n          paragraphs {\n            name\n          }\n        }\n      }\n    }\n  }\n"]);return $=function(){return e},e}function q(){var e=c()(["\n  fragment PostNoteMissingNotification_post on Post {\n    id\n  }\n"]);return q=function(){return e},e}var J=function(e){var n,t,a,o,l,s=e.post,d=(0,b.v9)((function(e){return e.navigation.referrer})),c=(0,Q.TH)().hash,m=(0,X.G1)(),u=(0,X.PM)(),p=(0,W.t)(ee,{variables:{postId:null==s?void 0:s.id,postMeteringOptions:{referrer:d,sk:m,source:u}},ssr:!1}),k=r()(p,2),f=k[0],V=k[1],g=V.called,S=V.loading,h=V.error,E=V.data,N=null==c||null===(n=c.replace("#",""))||void 0===n?void 0:n.split("-"),y=r()(N,2),F=y[0],x=y[1],w=(null!=E?E:{}).post,T=null==w||null===(t=w.privateNotes)||void 0===t?void 0:t.find((function(e){return(null==e?void 0:e.id)===x})),_=null!==(a=null==w||null===(o=w.content)||void 0===o||null===(l=o.bodyModel)||void 0===l?void 0:l.paragraphs)&&void 0!==a?a:[],P=new Set(_.map((function(e){return e.name})).filter(Z.b)),A=!!T&&P.has(F),C=(0,K.O)(!!x&&!A),I=r()(C,3),R=I[0],D=I[1],B=I[2];return i.useEffect((function(){x&&!A?D():B()}),[A]),!g&&x&&f(),S||h||!R?null:i.createElement(v.x,{marginTop:"64px"},i.createElement(Y,{onHide:B},"The note you're looking for was deleted"))},ee=((0,m.Ps)(q()),(0,m.Ps)($())),ne=t(52278),te=function(e){var n=e.meteringInfo,t=e.post;return i.createElement(ne.M,{columns:8,gutter:!1,padding:{xs:"0 8px",sm:"0 8px",md:"0 16px",lg:"0 16px",xl:"0 16px"},tag:"div"},i.createElement(J,{post:t}),t.isNewsletter&&!!t.collection&&i.createElement(z,{collection:t.collection}),!!t.isLocked&&!!n&&i.createElement(O,{meteringInfo:n,post:t}))}},81712:(e,n,t)=>{"use strict";t.d(n,{f:()=>r});var i=t(319),a=t.n(i),o=t(19308),l=t(78693),r={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PublisherFollowButton_publisher"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Publisher"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionFollowButton_collection"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"UserFollowButton_user"}}]}}]}}].concat(a()(o.I.definitions),a()(l.s.definitions))}},55155:(e,n,t)=>{"use strict";t.d(n,{D:()=>c,f:()=>m});var i=t(28655),a=t.n(i),o=t(92471),l=t(67294),r=t(82405),s=t(32317);function d(){var e=a()(["\n  fragment PublisherFollowButton_publisher on Publisher {\n    __typename\n    ... on Collection {\n      ...CollectionFollowButton_collection\n    }\n    ... on User {\n      ...UserFollowButton_user\n    }\n  }\n  ","\n  ","\n"]);return d=function(){return e},e}var c=function(e){var n=e.publisher,t=e.buttonSize,i=e.isLinkStyle,a=void 0!==i&&i,o=e.susiEntry,d=e.width;return"Collection"===n.__typename?l.createElement(r.Fp,{buttonSize:t,collection:n,susiEntry:o}):l.createElement(s.Bv,{buttonSize:t,user:n,isLinkStyle:a,susiEntry:o,width:d})},m=(0,o.Ps)(d(),r.Iq,s.sj)},66862:(e,n,t)=>{"use strict";t.d(n,{P:()=>l,K:()=>r});var i=t(319),a=t.n(i),o=t(95472),l={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CustomThemeProvider_publisher"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Publisher"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"colorPalette"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"customDefaultBackgroundTheme_colorPalette"}}]}}]}}]}}].concat(a()(o.L9.definitions))},r={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CustomThemeProvider_customStyleSheet"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CustomStyleSheet"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"customDefaultBackgroundTheme_customStyleSheet"}},{kind:"FragmentSpread",name:{kind:"Name",value:"customStyleSheetFontTheme_customStyleSheet"}}]}}].concat(a()(o.Ui.definitions),a()(o.VE.definitions))}},54878:(e,n,t)=>{"use strict";t.d(n,{v$:()=>u,G8:()=>p,Ps:()=>k,Kc:()=>v});var i=t(28655),a=t.n(i),o=t(92471),l=t(67294),r=t(31889),s=t(98096),d=t(3207);function c(){var e=a()(["\n  fragment CustomThemeProvider_customStyleSheet on CustomStyleSheet {\n    id\n    ...customDefaultBackgroundTheme_customStyleSheet\n    ...customStyleSheetFontTheme_customStyleSheet\n  }\n  ","\n  ","\n"]);return c=function(){return e},e}function m(){var e=a()(["\n  fragment CustomThemeProvider_publisher on Publisher {\n    id\n    __typename\n    ... on Collection {\n      colorPalette {\n        ...customDefaultBackgroundTheme_colorPalette\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var u=function(e,n){var t=(0,r.F)(),i="Collection"===(null==n?void 0:n.__typename)?null==n?void 0:n.colorPalette:null;return(0,d.ZI)(e,(0,d.zI)(e,t,i))},p=function(e){var n=e.customStyleSheet,t=e.publisher,i=e.children,a=u(n,t);return l.createElement(s.f,{theme:a},i)},k=(0,o.Ps)(m(),d.L9),v=(0,o.Ps)(c(),d.Ui,d.VE)},31289:(e,n,t)=>{"use strict";t.d(n,{G:()=>i});var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"useShouldShowEntityDrivenSubscription_creator"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}},57189:(e,n,t)=>{"use strict";t.d(n,{N:()=>S});var i=t(67294),a=t(25145),o=t(68427),l=t(84739),r=t(12643),s=t(4381),d=t(17193),c=t(28695),m=t(93310),u=t(77355),p=t(26244),k=t(27323),v=t(87691),f=t(52069),V=t(14646),g=t(46696),S=function(e){var n,t,S,h=e.post,E=e.withFixedWidth,N=void 0===E||E,y=h&&h.previewImage||{},b=y.focusPercentX,F=y.focusPercentY,x=y.id,w=y.alt,T=h.collection,_=h.creator,P=null!==(n=null==h?void 0:h.title)&&void 0!==n?n:"",A=(0,a.L)(h),C=null!==(t=null==T?void 0:T.name)&&void 0!==t?t:null,I=(0,o.B)(),R=(0,l.I)();_&&(S=R(_));var D=x?"170px":"".concat(226,"px"),B=(0,V.I)(),M=(0,i.useCallback)((function(){return _&&i.createElement(c.K,{user:_})}),[_]);return i.createElement(u.x,{display:"flex",flexDirection:"column",justifyContent:"center",marginBottom:"24px"},i.createElement(u.x,{display:"flex",flexDirection:"row",justifyContent:"space-between"},i.createElement(u.x,{display:"flex",flexDirection:"column",marginRight:"24px",flexGrow:"1",flexBasis:"0%"},_&&i.createElement(u.x,{display:"flex",alignItems:"center",marginBottom:"8px"},i.createElement(u.x,{marginRight:"8px"},i.createElement(m.r,{href:S},i.createElement(d.Yt,{scale:"XXXS",user:_}))),i.createElement(u.x,{paddingRight:"4px"},i.createElement(p.$,{targetDistance:15,mouseLeaveDelay:100,placement:"top",role:"tooltip",popoverRenderFn:M},i.createElement(u.x,{display:"flex"},i.createElement(m.r,{href:S},i.createElement(v.F,{scale:"S",color:"DARKER",clamp:1},_.name))))),T&&T.name&&i.createElement(i.Fragment,null,i.createElement(u.x,{paddingRight:"4px"},i.createElement(v.F,{scale:"S",color:"LIGHTER"},"in")),i.createElement(u.x,null,i.createElement(m.r,{href:I(T)},i.createElement(v.F,{scale:"S",color:"DARKER",clamp:1},C))))),P&&i.createElement(k.P,{href:A},i.createElement(f.Dx,{scale:"XS",clamp:3},i.createElement("div",{className:N?B({width:D}):void 0},P)))),i.createElement(k.P,{href:A},i.createElement(u.x,{width:"56px"},x&&i.createElement(r.G,{height:1,width:1},i.createElement(s.UV,{miroId:x,alt:w||"",aspectRatio:s.Pr.Square,strategy:g._S.Crop,width:56,rules:{borderRadius:"2px"},focusPercentX:b||50,focusPercentY:F||50,freezeGifs:!0}))))))}},98482:(e,n,t)=>{"use strict";t.d(n,{k:()=>I});var i=t(63038),a=t.n(i),o=t(67294),l=t(6722),r=t(43242),s=t(80745),d=t(28655),c=t.n(d),m=t(87757),u=t.n(m),p=t(6479),k=t.n(p),v=t(48926),f=t.n(v),V=t(38460),g=t(92471),S=t(68356),h=t.n(S),E=t(35469);function N(){var e=c()(["\n  fragment ThreadedResponsesSidebarContent_post on Post {\n    id\n    postResponses {\n      count\n    }\n    collection {\n      id\n      viewerEdge {\n        id\n        isEditor\n      }\n    }\n    creator {\n      id\n    }\n    ...ThreadedReplies_post\n  }\n  ","\n"]);return N=function(){return e},e}var y=(0,g.Ps)(N(),E.e),b=t(76412),F=t(18733),x=t(66411),w=t(50742),T=t(97217),_=t(86742);function P(){var e=c()(["\n  fragment ThreadedResponsesSidebar_post on Post {\n    id\n    ...ThreadedResponsesSidebarContent_post\n  }\n  ","\n"]);return P=function(){return e},e}var A=h()({loading:function(){return null},loader:function(){return Promise.all([t.e(4792),t.e(7084),t.e(8537),t.e(3551),t.e(8121),t.e(8720),t.e(8913)]).then(t.bind(t,41469))},modules:["./ThreadedResponsesSidebarContent"],webpack:function(){return[41469]},render:(0,w.n)("ThreadedResponsesSidebarContent")}),C=function(e){var n,t,i,l,r,d,c,m,p,v=e.isResponsesSidebarVisible,g=e.inResponseToQuote,S=e.setInResponseToQuote,h=e.parentPost,E=e.continueThisThreadPost,N=e.continueThisThreadPostDepth,y=e.showPreviousSidebar,w=e.cleanupSidebar,P=e.initialSidebarRender,C=o.useState(T.sV.TOP),I=a()(C,2),R=I[0],D=I[1],B=o.useState(!1),M=a()(B,2),L=M[0],O=M[1],U=o.useRef(null),H=(0,V.t)(_.A,{variables:{postId:h.id,postResponsesPaging:{limit:s.p4},sortType:R},ssr:!1}),z=a()(H,2),W=z[0],Q=z[1],j=Q.called,G=Q.loading,K=Q.data,Y=Q.fetchMore;j||E||!v||(W(),A.preload());var X=null==K||null===(n=K.post)||void 0===n?void 0:n.responsesLocked,Z=null==K||null===(t=K.post)||void 0===t?void 0:t.isLockedResponse,$=(0,s.aj)(v,P,null==K||null===(i=K.post)||void 0===i?void 0:i.threadedPostResponses,E),q=$.responses,J=$.showCreateReplyEditor,ee=(null==K||null===(l=K.post)||void 0===l||null===(r=l.responseRootPost)||void 0===r||null===(d=r.post)||void 0===d?void 0:d.id)||"",ne=N||(null==K||null===(c=K.post)||void 0===c||null===(m=c.responseRootPost)||void 0===m?void 0:m.responseDepth)||0,te=void 0,ie=null==q||null===(p=q.pagingInfo)||void 0===p?void 0:p.next;return ie&&!E&&(te=function(){var e=f()(u().mark((function e(){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Y){e.next=5;break}return ie.__typename,n=k()(ie,["__typename"]),e.next=4,Y({variables:{postId:h.id,postResponsesPaging:n}});case 4:O(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),o.createElement(F.N8,null,o.createElement(x.cW,{source:{name:"responses",postId:h.id},extendSource:!0},o.createElement(b.I,{sidebarRef:U,cleanupSidebar:w,isResponsesSidebarVisible:v,pagingInfoNext:ie,isFetchingNextSetOfResponses:L,setIsFetching:O,fetchMoreWithArguments:te,initialSidebarRender:P},(function(e){var n=e.responseDistribution,t=e.setResponseDistribution,i=e.closeSidebar;return j||E?o.createElement(A,{responses:q,parentPost:h,responsesLocked:X,isLockedResponse:Z,isLoadingInitialContent:G,isFetchingNextSetOfResponses:L,isResponsesSidebarVisible:v,closeSidebar:i,showPreviousSidebar:y,inResponseToQuote:g,setInResponseToQuote:S,sidebarRef:U,responseDistribution:n,setResponseDistribution:t,responseSortType:R,setResponseSortType:D,rootPostId:ee,postDepth:ne,isContinueThisThread:!!E,showCreateReplyEditor:J}):null}))))},I=((0,g.Ps)(P(),y),function(e){var n=e.children,t=e.post,i=(0,o.useState)(void 0),d=a()(i,2),c=d[0],m=d[1],u=(0,o.useCallback)((function(e){return function(n){m(n),e()}}),[]);return o.createElement(r.E,null,(function(e){var i=e.showPreviousSidebar,a=e.hasLoaded,r=e.initialSidebarRender,d=e.isVisible,p=e.continueThisThreadPosts,k=e.openSidebar,v=e.cleanupSidebar;return o.createElement(l.Q.Provider,{value:{openSidebarToRespondToHighlight:u(k)}},!!t&&a&&o.createElement(C,{isResponsesSidebarVisible:d&&0===p.length,parentPost:t,inResponseToQuote:c,setInResponseToQuote:m,showPreviousSidebar:i,cleanupSidebar:v,initialSidebarRender:!!r.current}),!!t&&a&&p.map((function(e,n,a){var l=(0,s.iI)(n);return o.createElement(C,{key:t.id,isResponsesSidebarVisible:d&&n===a.length-1,parentPost:t,inResponseToQuote:c,setInResponseToQuote:m,continueThisThreadPost:e,continueThisThreadPostDepth:l,showPreviousSidebar:i,cleanupSidebar:v,initialSidebarRender:!!r.current})})),n)}))})},43242:(e,n,t)=>{"use strict";t.d(n,{E:()=>k});var i=t(319),a=t.n(i),o=t(63038),l=t.n(o),r=t(38125),s=t.n(r),d=t(67294),c=t(21232),m=t(31889),u=t(34135),p=t(77280),k=function(e){var n=e.children,t=d.useState(!1),i=l()(t,2),o=i[0],r=i[1],k=(0,m.F)(),v=!!(0,p.Wd)("responsesOpen"),f=d.useState(!1),V=l()(f,2),g=V[0],S=V[1],h=d.useRef(!0),E=d.useRef(0),N=d.useState(!1),y=l()(N,2),b=y[0],F=y[1],x=d.useCallback((function(){return S(!0)}),[]),w=d.useState([]),T=l()(w,2),_=T[0],P=T[1],A=d.useCallback((function(e){h.current=!1,P([].concat(a()(_),[e]))}),[_]),C=d.useCallback((function(){P(s()(_))}),[_]),I=d.useCallback((function(){S(!1),P([]),h.current=!0}),[]);d.useEffect((function(){F(!0),S(v)}),[v]);var R=function(){window.innerWidth<k.breakpoints.md&&r(!0)};return d.useEffect((function(){return R(),u.V6.on("resize",R),function(){return u.V6.off("resize",R)}}),[]),d.useEffect((function(){var e,n,t=null===(e=window)||void 0===e||null===(n=e.document)||void 0===n?void 0:n.documentElement;return o&&null!=t&&t.style&&(g?(t.style.top="-".concat(E.current,"px"),E.current=t.scrollTop,t.style.overflow="hidden",t.style.position="fixed"):(t.style.overflow="",t.style.position="",t.style.top="",t.scrollTop=E.current)),function(){o&&null!=t&&t.style&&(t.style.overflow="",t.style.position="",t.style.top="",t.scrollTop=E.current)}}),[g]),d.createElement(c.f.Provider,{value:{addContinueThisThreadSidebar:A,openSidebar:x,closeSidebar:I}},n({showPreviousSidebar:C,hasLoaded:b,initialSidebarRender:h,isVisible:g,continueThisThreadPosts:_,openSidebar:x,cleanupSidebar:I}))}},28451:(e,n,t)=>{"use strict";var i;t.d(n,{j:()=>i}),function(e){e.LOHighlightCTA="lo_highlight_cta",e.LIHighlightCTA="li_highlight_cta",e.RegWall="regwall",e.SyndicatedRegwall="syndicated_regwall"}(i||(i={}))},78620:(e,n,t)=>{"use strict";t.d(n,{H:()=>i});var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"UpsellClickable_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"sequence"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sequenceId"}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/188.d2d575bc.chunk.js.map